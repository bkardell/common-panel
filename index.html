<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Panels and Panel Sets</title>
    <meta charset='utf-8'>
    <script src='http://www.w3.org/Tools/respec/respec-w3c-common'
            async class='remove'></script>
    <style>
        .todo { color: red; font-weight: bold; }
    </style>

    <script class='remove'>
      var respecConfig = {
          specStatus: "unofficial",
          shortName:  "panels-and-panelsets",
          editors: [
                {   name:       "Brian Kardell", 
                    url:        "https://twitter.com/briankardell",
                    company:    "Apollo Education Group",
                    companyURL: "http://www.apollo.edu/"
                },
                {   name:       "Steve Faulkner",
                    url:        "https://twitter.com/stevefaulkner",
                    company:    "The Paciello Group",
                    companyURL: "http://www.paciellogroup.com/"
                },
                {   name:       "LÃ©onie Watson",
                    url:        "https://twitter.com/LeonieWatson",
                    company:    "The Paciello Group",
                    companyURL: "http://www.paciellogroup.com/"
                }
          ]
      };
    </script>
  </head>
  <body>
    <section id='abstract'>
      <p>
        This document describes a universal markup attempting to pave the cowpath 
        we observe for a construct called a <code>&lt;common-panel&gt;</code>
        which contains what appear to be common attributes and provide also
        and a single selection interaction paradigm for a collection of them called a
        <code>&lt;common-panel-set&gt;</code>.  Defining these allow editors to create a reusable 
        set of declarative code which remains semantic, widely stylable 
        in visual terms while retaining a conceptual and physical separation that retains 
        the important accessibility benefits for all of them.
      </p>
    </section>

    <section id='sotd'>
    </section>

    <section>
      <h2>Introduction</h2>
      <p>
        When editing a document, an author attempts to mark it up semantically and control 
        a separation of visual aspects through CSS.  This allows various the user-agent  
        and tools to use the same semantic data to provide any number of affordances 
        for accessibility, navigation, styling and interaction. Over time, UI designers 
        have created a number of common metaphors for visually managing and providing 
        single selection/focus navigation through a collection of titled 'blocks', which 
        are, themselves more complex and meaningful than it might seem at first glace. 
      </p>

      <p>        
        Currently we have a number of useful building block elements like 
        <code>&lt;section&gt;</code> and <code>&lt;h1&gt;</code> which are high-level in 
        their own right, but still beneath the level of describing many common constructs.
        It is useful then to attempt to extract more complex, higher-level constructs as 
        we see them emerge.  Doing so, expands an author's ability to easily universally 
        describe common things and the  ability of UA, tools and search engines to make 
        sense of them.  This is one such effort.
      </p>

      <p>The concept of a <em>panel</em> exists in traditional print media and has carried
        over into Web design.  Over time, UI/UX designers have created a number of common 
        visual metaphors for managing interaction with a collection of panels: Accordions, 
        tabs, decks and carousels are just a few.</p>

      <p>Because the art of creating a good user interface is something we are all still 
        collectively trying to figure out, the history and development of these metaphors 
        have generally taken the approach of independently naming these and solving each 
        problem independently:  In the realm of custom elements, this means that you would 
        have independent tags for each.  However, this obscures the underlying fact that 
        in virtually every way they are <em>conceptually</em> identical.  
        The WAI-ARIA Best Practices document, in fact, 
        defines accordions as a kind of <code>tablist</code> and in terms of keyboard 
        navigation says that UAs should treat up/down and left/right navigation for tabs and 
        accordions as interchangeable.</p>

      <p>
        With the advent of ever more variant screen sizes, interaction methods, 
        responsive design we now have designs which switch their visual representation of 
        these metaphors based on the current size of the screen, rather than 
        being constant. For example, on a wide screen, a tabbed interface may seem like a 
        natural choice, whereas the same interface is more natural as an accordion, or a 
        deck on a small one.  This further underscores their 'sameness'.
      </p>

      <p>These observations highlight the fact that their differences are primarily 
        visual, not semantic:  How could a tabset suddenly <em>become</em> a wholly 
        different thing based on screen resizing?  What difference does it make to 
        the user of a screen reader that it is one or the other if their interaction 
        model is unchanged?  And, if the difference is visual, shouldn't control of 
        this be in the domain of CSS, rather than markup?</p>

    <p>This proposal attempts to solve the issues described in this introduction 
        by defining these common elements and providing a separation of concerns 
        which we believe strikes the right balances.</p>
    <section>
        <h1>Panels</h1>
        <p>
            The concept of a panel recurrs in print and online, in documents and applicaitons.  
            Based on some factors, it has proven useful when used in UI, to sometimes add certain 
            abilities to the panel itself, for example, the ability to 'collapse' it and both 
            remove its contents from the visual appearance and place appropriate control for 
            allowing the user to 'expand' it, or 'dismiss' it and remove it from the UI altogether.  
        </p>
        <p>
            A panel represents a chunk of content that can be displayed in a common fashion within a UI, and which behaves consistently in UA/AT. A panel may be a simple representation of content, or it may have certain characteristics such as the ability to be expanded/collapsed or removed from the UI completely.
        </p>

        <section>
            <h2>Basic Panel</h2>
            <p>
                Use case: An author wants to create a simple content container with consistent UA/AT features, that can be displayed in a common fashion.
            </p>
            <p>
                A basic panel may be adapted with visual or aural styles, but it remains a cohesive semantic thing. It is the basic building block for the use cases and design patterns in the remainder of this document.
            </p>

            <img src="basic-common-panel.png" >
            <p>
                To this end, we introduce a common markup element...
            </p>
            <pre class="example highlight prettyprint prettyprinted">&lt;common-panel title="My favorite books"&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Here are a list of my favorite books: <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ol&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Hitchhiker's Guide to the Galaxy&lt;/li&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Pride and Prejudice&lt;/li&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Green Eggs and Ham&lt;/li&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ol&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt; <br>
&lt;/common-panel&gt;
           </pre>
        </section>

        <section>
            <h2>Removable Panels</h2>
        <p>
		Use case: An author includes a panel containing content of secondary or ancillary importance, and wants to provide the user with the option to remove the panel from the UI.
		</p>
		<p>
		A removable panel has the <code>is-removable</code> attribute assigned to it. When the <code>is-removable</code> attribute is present, a mechanism to let the user dismiss the panel is provided. When the panel is dismissed by the user it is removed from the DOM.
		</p>
        <img src="dismissable-panel.png" >
        <pre class="example highlight prettyprint prettyprinted">&lt;common-panel common-title="Reminder" is-removable&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Today is the first day of the rest of your life.&lt;/p&gt;<br />
&lt;/common-panel&gt;
        </pre>
        <p class="note">
		The <code>is-removable</a> attribute is a standard platform <a href="http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#boolean-attribute">Boolean attribute</a>. The presence of <code>is-removable</code> represents the true state (the panel can be removed), and the absence of the attribute represents the false value (the panel cannot be removed).
		</p>
        </section>

        <section>
        <h2>Expandable/Collapsible Panels</h2>
		<p><strong>Use case:</strong> An author wants to make efficient use of screen real-estate by giving the user the ability to show/hide panel content. The user benefits by being able to manage "information noise" in a way that minimises cognitive load.</p>
        <p>an expandable/collapsible panel has the <code>expanded-state</code> attribute assigned to it. When the <code>expanded-state</code> attribute is present, the panel title becomes a control that allows the panel to be expanded/collapsed.</p>
        <p>If the <code>expanded-state</code> attribute is present but has no value, the starting state of the panel is collapsed. The <code>expanded-state</code> attribute may be set explicitly to <code>"open"</code>.</p>
        <img src="collapsable-panel.png" >
        <pre class="example highlight prettyprint prettyprinted">&lt;common-panel common-title="Today's News" expanded-state&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Something &lt;a href="amazing.html"&gt;amazing&lt;/a&gt;happened on the Internet today...&lt;/p&gt;<br>
&lt;/common-panel&gt;<br>
        </pre>
        </section>
        <section>
            <h2>Pseudo-Elements</h2>
            <p>
            A <code>&lt;common-panel&gt;</code> exposes the following pseudo-elements with built in semantics and functionality, and which can be used to achieve a wide number of visual presentation effects:
            <ul>
                <li><code>::--common-panel-header</code></li>
                <li><code>::--common-panel-icon</code></li>
                <li><code>::--common-panel-title</code></li>
                <li><code>::--common-panel-destroy</code> (if the is-removable attribute is set)</li>
            </ul>

            </code>
            <p>
                Styling may be managed via the provided pseudo-classes and user agents MAY choose how they indicate state by default.  UA MUST <span class="todo">(todo: DEFINE WHAT IT MUST DO vs WHAT IT MAY DO to automatically adjust).</span>
            </p>
        </section>
        <section>
            <h2>DOM</h2>
            <p>
                <code>&lt;common-panel&gt;</code> elements expose a runtime property of "expansionState" which will 
                be "opened" or "closed".
            </p>
        </section>
    </section>

    <p>


        <em class="note">Define what aria/interactions a lone panel should have, if any.</em>

<hr>
    <section>
        <h1>Panel Sets</h1>

        <p>When placed as a child of a <code>&lt;common-panel-set&gt;</code> element,
        the panel set will manage the selection/activation of a single <code>&lt;common-panel&gt;</code> at a time, 
        effectively managing their <code>collapse-state</code>.  In otherwords, <code>&lt;common-panel&gt;</code> element 
        children of a <code>&lt;common-panel-set&gt;</code> are automatically collapsable.  
        By default, the first <code>&lt;common-panel-set&gt</code> is considered expanded (not collapsed).
        Because the parser processes elements in document order, any subsequent claims of
        expansion trump the first by removing the attribute from siblings and setting their <code>collapse-state="closed"</code>.  Through this means, any number of styles are achievable:
        </p> 
        <p>
            Some examples of visual views on a single select <code>&lt;common-panel-sets&gt;</code> are
            <ul>
                <li>tabset/tabmenu</li>
                <li>accordion</li>
                <li>carousel</li>
                <li>deck</li>
                <li>coverflow</li>
            </ul>
        </p>

    <p class="issue">
        If HTML authors are encouraged to follow this separation, it inevitably begs the question about how CSS authors can 
        correctly manage which type of display the element takes on in which conditions.  This is currently "up in the air" 
        with one (not especially good, but currently prollyfilled) answer <a href="preferrential-display.html">here</a>.    
    </p>

    <em class="note">Define what aria/interactions a lone panel should have, if any.</em>

        <pre class="example highlight prettyprint prettyprinted">&lt;common-panel-set id="foo"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;common-panel title="Panel #1"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;If you can read this, tab #1 is expanded&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/common-panel&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;common-panel title="Panel #2"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;If you can read this, tab #2 is expanded&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/common-panel&gt;<br>
&lt;/common-panel-set&gt;
        </pre>

        <p>The <code>&lt;common-panel-set&gt</code> exposes a DOM method like the <code>&lt;select&gt</code> element,
        exposing <code>.basic_panels</code> collection, a <code>basic_selectedIndex</code> property, and a <code>basic_selectedPanel</code> property.</p>


        <pre class="example highlight prettyprint prettyprinted">&lt;common-panel-set&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;common-panel id="bar" title="Panel #1"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;If you can read this, tab #1 is expanded&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/common-panel&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;common-panel title="Panel #2" collapse-state="expanded"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;If you can read this, tab #2 is expanded&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/common-panel&gt;<br>
&lt;common-panel-set&gt;<br>
&lt;script&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var panelSet = document.querySelector("#bar");<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(panelSet.selectedIndex); // 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(panelSet.basic_panels.length); // 2<br>
&nbsp;&nbsp;&nbsp;&nbsp;console.log(panelSet.basic_selectedPanel); // the selected basic panel element<br>
&lt;script&gt;</pre>

    </section>

    </section>
  </body>
</html>